<!DOCTYPE html>
<html>
<head>
	<title>Shawn's Rehab Provider Navigator</title>
	<style>
		body {
			background-color: rgba(211,17,69,0.8);
			font-family: Arial, sans-serif;
			text-align: center;
			margin-top: 50px;
		}
		h1 {
			color: white;
			font-size: 36px;
			margin: 0;
			padding: 20px;
		}
		.container {
			display: inline-block;
			background-color: white;
			border: 2px solid black;
			padding: 20px;
		}
		input[type="text"] {
			font-size: 24px;
			padding: 10px;
			width: 400px;
			margin-bottom: 20px;
			border: none;
			border-bottom: 2px solid black;
		}
		input[type="submit"] {
			background-color: black;
			color: white;
			font-size: 24px;
			padding: 10px 20px;
			border: none;
			cursor: pointer;
			margin-left: 10px;
		}
		table {
			margin: auto;
			margin-top: 20px;
			border-collapse: collapse;
			width: 80%;
			font-size: 18px;
			text-align: left;
		}
		th, td {
			padding: 12px;
			border: 1px solid black;
		}
		th {
			background-color: black;
			color: white;
		}
	</style>
</head>
<body>
	<h1>Shawn's Rehab Provider Navigator</h1>
	<div class="container">
		<form method="post">
			<label for="postcode">Enter Member Postcode:</label>
			<input type="text" id="postcode" name="postcode" required>
			<input type="submit" value="Search">
		</form>
		<?php
		if(isset($_POST['postcode'])) {
			$postcode = $_POST['postcode'];
			$providers = array();
			if (($handle = fopen("providers.csv", "r")) !== FALSE) {
			    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
			        $name = $data[0];
			        $postcode_csv = $data[1];
			        if (strpos($postcode_csv, '-') !== false) {
			        	$postcodes = explode('-', $postcode_csv);
			        	if ($postcode >= $postcodes[0] && $postcode <= $postcodes[1]) {
			        		array_push($providers, $name);
			        	}
			        } elseif ($postcode == $postcode_csv) {
			        	array_push($providers, $name);
			        }
			    }
			    fclose($handle);
			}
			if (count($providers) > 0) {
				echo "<table>";
				echo "<tr><th>Name</th></tr>";
				foreach ($providers as $provider) {
					echo "<tr><td>$provider</td></tr>";
				}
				echo "</table>";
			} else {
				echo "<p>No providers found in this area.</p>";
			}
		}
		?>
	</div>
</body>
</html>
